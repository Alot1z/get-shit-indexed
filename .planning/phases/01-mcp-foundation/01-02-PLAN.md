---
phase: 01-mcp-foundation
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified: [".planning/codebase/GOLDEN-PATTERN.md", "workflows/*.md"]
autonomous: true
user_setup: []

must_haves:
  truths:
    - "Golden pattern CG discover → CI understand → CI understand → DC act → DC verify → CI verify works end-to-end"
    - "Tool chain demonstrates relationship-aware workflow using CG"
    - "Tool chain demonstrates code understanding using CI"
    - "Tool chain demonstrates action execution using DC"
    - "Tool chain demonstrates verification using DC and CI"
    - "Documentation provides reusable pattern for future workflows"
  artifacts:
    - path: ".planning/codebase/GOLDEN-PATTERN.md"
      provides: "Golden pattern documentation and examples"
      min_lines: 100
    - path: ".planning/codebase/TOOL-CHAIN-PATTERNS.md"
      provides: "Tool chain pattern catalog for workflow selection"
      min_lines: 150
  key_links:
    - from: "CodeGraphContext MCP"
      to: "Code-Index MCP"
      via: "discovery request"
      pattern: "CG → CI relationship discovery"
    - from: "Code-Index MCP"
      to: "Code-Index MCP (deepen)"
      via: "follow-up queries"
      pattern: "CI → CI internal understanding"
    - from: "Code-Index MCP"
      to: "Desktop Commander MCP"
      via: "action translation"
      pattern: "CI → DC execution"
    - from: "Desktop Commander MCP"
      to: "Desktop Commander MCP (verify)"
      via: "verification operation"
      pattern: "DC → DC self-verification"
    - from: "Desktop Commander MCP"
      to: "Code-Index MCP"
      via: "verification query"
      pattern: "DC → CI result verification"
---

<objective>
Implement and document the golden pattern (CG discover → CI understand → CI understand → DC act → DC verify → CI verify) as a reusable tool chain for all GSD workflows.

Purpose: Establish the proven tool chain pattern that maximizes each MCP server's strengths while ensuring verification
Output: Golden pattern documentation with examples and tool chain pattern catalog
</objective>

<execution_context>
@C:\Users\mose\.claude\get-shit-done\workflows\execute-plan.md
@C:\Users\mose\.claude\get-shit-done\templates\summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

@.planning/phases/01-mcp-foundation/01-01-SUMMARY.md
@.planning/codebase/ARCHITECTURE.md
@.planning/codebase/STACK.md
@.planning/codebase/INTEGRATIONS.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Document golden pattern theory and flow</name>
  <files>.planning/codebase/GOLDEN-PATTERN.md</files>
  <action>Create comprehensive documentation for the golden pattern:

1. Document the theoretical foundation:
   - Why this specific sequence (CG → CI → CI → DC → DC → CI)
   - What each MCP server contributes to the chain
   - When to use this pattern vs alternatives

2. Document each step in detail:
   - CG discover: CodeGraphContext analyzes relationships, identifies relevant files/symbols
   - CI understand: Code-Index performs deep code analysis, extracts implementation details
   - CI understand: Code-Index performs additional targeted queries for completeness
   - DC act: Desktop Commander executes file/process operations based on CI analysis
   - DC verify: Desktop Commander verifies changes were applied correctly
   - CI verify: Code-Index confirms implementation matches analysis

3. Include concrete example workflow showing:
   - Starting problem (e.g., "Add authentication to user routes")
   - Each step's output feeding into the next
   - Final verified state

4. Document when to use golden pattern:
   - Complex code changes requiring relationship awareness
   - Multi-file refactors affecting dependencies
   - Feature additions requiring comprehensive analysis
   - Situations where verification is critical</action>
  <verify>GOLDEN-PATTERN.md exists with complete flow documentation and concrete example</verify>
  <done>Golden pattern theory documented with detailed step-by-step flow and usage guidelines</done>
</task>

<task type="auto">
  <name>Task 2: Create practical golden pattern implementation guide</name>
  <files>.planning/codebase/GOLDEN-PATTERN.md</files>
  <action>Add practical implementation guide to GOLDEN-PATTERN.md:

1. Document MCP tool calls for each step:
   - Step 1 (CG discover): `mcp__codegraph__*` tools for relationship analysis
   - Step 2 (CI understand): `mcp__code-index-mcp__search_code_advanced` for initial analysis
   - Step 3 (CI understand): `mcp__code-index-mcp__get_symbol_body` for deep understanding
   - Step 4 (DC act): `mcp__desktop-commander__edit_block` or `write_file` for changes
   - Step 5 (DC verify): `mcp__desktop-commander__read_file` to verify changes
   - Step 6 (CI verify): `mcp__code-index-mcp__search_code_advanced` for confirmation

2. Include code examples for a representative scenario:
   - Example: Adding a new field to a TypeScript interface
   - Show exact tool calls and parameters
   - Show expected outputs at each step

3. Document error handling and recovery:
   - What to do if CG server is unavailable
   - How to recover when CI search returns no results
   - How to handle DC operation failures
   - Verification failure retry strategies</action>
  <verify>GOLDEN-PATTERN.md includes practical tool call examples and error handling guidance</verify>
  <done>Practical implementation guide with tool-specific examples and error handling added</done>
</task>

<task type="auto">
  <name>Task 3: Document alternative tool chain patterns</name>
  <files>.planning/codebase/TOOL-CHAIN-PATTERNS.md</files>
  <action>Create catalog of tool chain patterns for different workflow scenarios:

1. Document linear patterns (15 variations):
   - DC-only: Simple file operations
   - CI-only: Code search and analysis
   - DC → CI: Edit then analyze impact
   - CI → DC: Analyze then edit
   - Full golden pattern: CG → CI → CI → DC → DC → CI
   - [Add 10 more common linear patterns]

2. Document circular patterns (4 variations):
   - CI verify → DC act → CI verify (verification loop)
   - DC act → CI analyze → DC adjust (iterative refinement)
   - CG discover → CI understand → CG refine (relationship discovery loop)
   - [Add 1 more common circular pattern]

3. Document hybrid patterns (5 variations):
   - Parallel DC operations for independent files
   - Batch CI queries before DC operations
   - CG-guided multi-file DC operations
   - CI pre-analysis with DC post-verification
   - [Add 1 more common hybrid pattern]

4. For each pattern include:
   - Visual diagram showing the flow
   - When to use this pattern (decision criteria)
   - MCP tools involved at each step
   - Token efficiency considerations
   - Example use case</action>
  <verify>TOOL-CHAIN-PATTERNS.md exists with 15 linear, 4 circular, and 5 hybrid patterns documented</verify>
  <done>Tool chain pattern catalog created with decision criteria for pattern selection</done>
</task>

<task type="auto">
  <name>Task 4: Create tool chain decision tree</name>
  <files>.planning/codebase/TOOL-CHAIN-PATTERNS.md</files>
  <action>Add decision tree to TOOL-CHAIN-PATTERNS.md:

1. Create decision tree for selecting optimal tool chain:
   - Starting question: "What type of operation?"
   - Branches for: File operation, Code analysis, Relationship discovery, Complex workflow
   - Leaf nodes: Specific tool chain patterns

2. Document decision criteria:
   - Use DC-only for: Single file edits, simple reads, process operations
   - Use CI-only for: Code search, symbol navigation, understanding existing code
   - Use CG for: Relationship discovery, impact analysis, dependency mapping
   - Use golden pattern for: Complex multi-file changes requiring verification
   - Use hybrid patterns for: Batched operations, parallel workflows

3. Include example scenarios walking through the tree:
   - "I need to find where function X is defined" → CI-only pattern
   - "I need to add authentication to these 5 routes" → Golden pattern
   - "I need to understand how module A depends on module B" → CG → CI pattern
   - "I need to update config in 3 files" → Parallel DC pattern

This decision tree helps future workflow authors select the right pattern quickly.</action>
  <verify>TOOL-CHAIN-PATTERNS.md includes decision tree for pattern selection with examples</verify>
  <done>Tool chain decision tree created with clear criteria for pattern selection</done>
</task>

</tasks>

<verification>
1. GOLDEN-PATTERN.md documents complete CG → CI → CI → DC → DC → CI flow
2. GOLDEN-PATTERN.md includes practical examples with specific MCP tool calls
3. TOOL-CHAIN-PATTERNS.md catalogs 15 linear, 4 circular, and 5 hybrid patterns
4. TOOL-CHAIN-PATTERNS.md includes decision tree for pattern selection
5. Both documents provide reusable patterns for GSD workflow authors
</verification>

<success_criteria>
1. Golden pattern (CG → CI → CI → DC → DC → CI) is fully documented
2. Practical implementation guide includes tool-specific examples
3. Tool chain pattern catalog documents 24 total patterns (15 linear + 4 circular + 5 hybrid)
4. Decision tree enables quick selection of appropriate pattern
5. Documentation is ready for use in Phase 2 workflow updates
</success_criteria>

<output>
After completion, create `.planning/phases/01-mcp-foundation/01-02-SUMMARY.md`
</output>
