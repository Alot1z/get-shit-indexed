---
phase: 01-mcp-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [.planning/codebase/MCP-SERVER-STATUS.md, .planning/codebase/MCP-TOKEN-BENCHMARK.md]
autonomous: true
user_setup: []

must_haves:
  truths:
    - "Desktop Commander MCP server responds to file operations with <100ms latency"
    - "Code-Index MCP server responds to search queries with indexed results"
    - "CodeGraphContext MCP server at neo4j://localhost:7687 responds to relationship queries"
    - "All three servers are reachable and operational with documented tools"
    - "MCP tools show 80-90% token efficiency compared to native tools"
  artifacts:
    - path: ".planning/codebase/MCP-SERVER-STATUS.md"
      provides: "MCP server connectivity verification for DC, CI, CG"
      min_lines: 100
      contains: ["Desktop Commander: CONNECTED", "Code-Index: CONNECTED", "CodeGraphContext: CONNECTED", "neo4j://localhost:7687"]
    - path: ".planning/codebase/MCP-TOKEN-BENCHMARK.md"
      provides: "Token efficiency comparison data (80-90% savings)"
      min_lines: 100
      contains: ["80%", "90%", "token savings"]
  key_links:
    - from: "MCP-SERVER-STATUS.md"
      to: "MCP-TOKEN-BENCHMARK.md"
      via: "Efficiency metrics from server tests"
      pattern: "token.*efficiency|response.*time"
---

<objective>
Verify all three MCP servers (Desktop Commander, Code-Index, CodeGraphContext at neo4j://localhost:7687) are properly configured, connected, and responsive for GSI workflows.

Purpose: Establish the foundation for MCP-enhanced workflows by confirming all three servers (DC + CI + CG) are operational
Output: Updated server status documentation showing all 3 servers connected, plus token efficiency benchmarks
</objective>

<execution_context>
@~/.claude/get-shit-indexed\workflows\execute-plan.md
@~/.claude/get-shit-indexed\templates\summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/REQUIREMENTS.md

CG Server: neo4j://localhost:7687 (now running - previously unavailable)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify Desktop Commander MCP file operations</name>
  <files>.planning/codebase/MCP-SERVER-STATUS.md</files>
  <action>Test Desktop Commander (DC) MCP server file operations:

1. Test mcp__desktop-commander__get_file_info on README.md
2. Test mcp__desktop-commander__read_file on a known file
3. Test mcp__desktop-commander__list_directory with depth=2
4. Document results in MCP-SERVER-STATUS.md:
   - Server: Desktop Commander (DC)
   - Status: CONNECTED
   - Tools tested: get_file_info, read_file, list_directory
   - Response times
   - Available tools list (file operations, process operations)

Create new MCP-SERVER-STATUS.md with DC section first.</action>
  <verify>MCP-SERVER-STATUS.md exists with Desktop Commander section showing CONNECTED status and tested tools</verify>
  <done>Desktop Commander MCP verified connected and responsive for file operations</done>
</task>

<task type="auto">
  <name>Task 2: Verify Desktop Commander MCP process operations</name>
  <files>.planning/codebase/MCP-SERVER-STATUS.md</files>
  <action>Test Desktop Commander (DC) MCP server process operations:

1. Test mcp__desktop-commander__list_processes
2. Test mcp__desktop-commander__start_search with pattern="*.md"
3. Test mcp__desktop-commander__get_config for server settings
4. Append to MCP-SERVER-STATUS.md:
   - Process operation tools tested
   - Search operation tools tested
   - Response times
   - Any issues encountered

DC should be PRIMARY for all file/process operations (replaces Read/Write/Edit/Bash).</action>
  <verify>MCP-SERVER-STATUS.md has DC process operations section with list_processes, start_search, get_config tested</verify>
  <done>Desktop Commander process and search operations verified</done>
</task>

<task type="auto">
  <name>Task 3: Verify Code-Index MCP search operations</name>
  <files>.planning/codebase/MCP-SERVER-STATUS.md</files>
  <action>Test Code-Index (CI) MCP server search operations:

1. Test mcp__code-index-mcp__set_project_path for current repo
2. Test mcp__code-index-mcp__find_files with pattern="*.md"
3. Test mcp__code-index-mcp__search_code_advanced with pattern="MCP"
4. Test mcp__code-index-mcp__get_file_summary on a source file
5. Append to MCP-SERVER-STATUS.md:
   - Server: Code-Index (CI)
   - Status: CONNECTED
   - Tools tested: set_project_path, find_files, search_code_advanced, get_file_summary
   - Index status (files indexed)
   - Response times

CI should be PRIMARY for code search (replaces Grep/Glob).</action>
  <verify>MCP-SERVER-STATUS.md has Code-Index section showing CONNECTED, indexed files, and tested tools</verify>
  <done>Code-Index MCP verified connected and responsive for code search</done>
</task>

<task type="auto">
  <name>Task 4: Verify Code-Index MCP symbol operations</name>
  <files>.planning/codebase/MCP-SERVER-STATUS.md</files>
  <action>Test Code-Index (CI) MCP server symbol navigation:

1. Test mcp__code-index-mcp__build_deep_index to extract symbols
2. Test mcp__code-index-mcp__get_symbol_body on a function
3. Test mcp__code-index-mcp__get_settings_info for config
4. Append to MCP-SERVER-STATUS.md:
   - Symbol operation tools tested
   - Deep index status
   - Available symbol tools
   - Response times

Symbol operations enable precise code understanding without reading full files.</action>
  <verify>MCP-SERVER-STATUS.md has CI symbol operations section with get_symbol_body and build_deep_index tested</verify>
  <done>Code-Index symbol navigation operations verified</done>
</task>

<task type="auto">
  <name>Task 5: Verify CodeGraphContext MCP at neo4j://localhost:7687</name>
  <files>.planning/codebase/MCP-SERVER-STATUS.md</files>
  <action>Test CodeGraphContext (CG) MCP server connectivity:

1. Test ListMcpResourcesTool to find CG resources
2. Test basic CG relationship query if available
3. Document CG server at neo4j://localhost:7687
4. Append to MCP-SERVER-STATUS.md:
   - Server: CodeGraphContext (CG)
   - Connection: neo4j://localhost:7687
   - Status: CONNECTED (previously was NOT AVAILABLE)
   - Available tools tested
   - Response times
   - Relationship analysis capabilities

CG provides code graph queries for relationship-aware workflows.</action>
  <verify>MCP-SERVER-STATUS.md has CodeGraphContext section showing CONNECTED at neo4j://localhost:7687 with tested tools</verify>
  <done>CodeGraphContext MCP verified connected at neo4j://localhost:7687 for relationship analysis</done>
</task>

<task type="auto">
  <name>Task 6: Benchmark file operation token efficiency</name>
  <files>.planning/codebase/MCP-TOKEN-BENCHMARK.md</files>
  <action>Compare MCP vs native tool token usage for file operations:

1. Measure token usage for mcp__desktop-commander__read_file
2. Compare to theoretical native Read tool usage
3. Calculate savings percentage
4. Create MCP-TOKEN-BENCHMARK.md with:
   - File operations benchmark table
   - Protocol overhead comparison
   - Token savings percentage (target: 80-90%)
   - DC tools vs native tools comparison

This data justifies MCP-005 requirement (tool priority rules).</action>
  <verify>MCP-TOKEN-BENCHMARK.md exists with file operations showing 80-90% token savings for DC vs native</verify>
  <done>File operation token efficiency benchmarked</done>
</task>

<task type="auto">
  <name>Task 7: Benchmark code search token efficiency</name>
  <files>.planning/codebase/MCP-TOKEN-BENCHMARK.md</files>
  <action>Compare MCP vs native tool token usage for code operations:

1. Measure token usage for mcp__code-index-mcp__search_code_advanced
2. Measure token usage for mcp__code-index-mcp__find_files
3. Compare to theoretical native Grep/Glob usage
4. Append to MCP-TOKEN-BENCHMARK.md:
   - Code search benchmark table
   - CI tools vs native tools comparison
   - Overall token savings (should be 80-90%)

Code search shows significant savings due to indexed results.</action>
  <verify>MCP-TOKEN-BENCHMARK.md has code search section showing 80-90% token savings for CI vs native</verify>
  <done>Code search token efficiency benchmarked</done>
</task>

<task type="auto">
  <name>Task 8: Document CG relationship analysis token efficiency</name>
  <files>.planning/codebase/MCP-TOKEN-BENCHMARK.md</files>
  <action>Document CodeGraphContext token efficiency for relationship analysis:

1. Measure token usage for CG relationship queries
2. Compare to manual relationship discovery (multiple searches)
3. Append to MCP-TOKEN-BENCHMARK.md:
   - CG tools vs manual analysis comparison
   - Relationship query efficiency
   - Token savings for complex analysis

CG provides relationship awareness that would require many native operations.</action>
  <verify>MCP-TOKEN-BENCHMARK.md has CG section showing relationship analysis efficiency</verify>
  <done>CodeGraphContext token efficiency documented</done>
</task>

<task type="auto">
  <name>Task 9: Calculate overall MCP token savings summary</name>
  <files>.planning/codebase/MCP-TOKEN-BENCHMARK.md</files>
  <action>Create summary section in MCP-TOKEN-BENCHMARK.md:

1. Aggregate all token efficiency data
2. Calculate overall savings percentage across all operations
3. Document recommendations based on data
4. Add summary section with:
   - Overall token savings (target: 80-90%)
   - Breakdown by operation type
   - Recommendations for tool priority rules

Summary provides data-driven justification for Skills > MCP > Native hierarchy.</action>
  <verify>MCP-TOKEN-BENCHMARK.md has summary showing 80-90% overall token savings for MCP vs native</verify>
  <done>Overall MCP token savings summary complete</done>
</task>

</tasks>

<verification>
1. All three MCP servers (DC, CI, CG) verified as connected and responsive
2. MCP-SERVER-STATUS.md documents all 3 servers with tools, response times, capabilities
3. MCP-TOKEN-BENCHMARK.md shows 80-90% token efficiency gains across all operations
4. CG server at neo4j://localhost:7687 confirmed working (previously was blocker)
5. No blockers remaining for golden pattern implementation
</verification>

<success_criteria>
1. Desktop Commander MCP (DC) server verified connected and responsive
2. Code-Index MCP (CI) server verified connected and responsive with deep index
3. CodeGraphContext (CG) server verified connected at neo4j://localhost:7687
4. Token efficiency benchmarks show 80-90% savings for all MCP tools
5. MCP-SERVER-STATUS.md updated with all 3 servers showing CONNECTED
6. MCP-TOKEN-BENCHMARK.md created with comprehensive efficiency data
</success_criteria>

<output>
After completion, create `.planning/phases/01-mcp-foundation/01-01-SUMMARY.md` with:
- Duration metrics
- All 9 task commits
- CG server connectivity confirmed (neo4j://localhost:7687)
- Token savings 80-90% verified
- Files created/modified
- Next: Golden pattern implementation with full CG integration
</output>
