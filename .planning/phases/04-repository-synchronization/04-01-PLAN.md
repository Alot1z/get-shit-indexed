---
phase: 04-repository-synchronization
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [C:\Users\mose\.claude\get-shit-done\**, C:\github-repos\my-claude-code-repos\get-shit-done-code-index\**]
autonomous: true
user_setup: []

must_haves:
  truths:
    - "Local GSD directory structure is analyzed and catalogued"
    - "Cloned repo structure is analyzed and catalogued"
    - "File differences between local and clone are identified"
    - "Sync strategy is documented based on comparison"
    - "No data loss occurs during sync process"
  artifacts:
    - path: ".planning/phases/04-repository-synchronization/04-01-SYNC-ANALYSIS.md"
      provides: "Detailed comparison of local vs cloned repository structures"
      min_lines: 100
    - path: ".planning/phases/04-repository-synchronization/04-01-SYNC-STRATEGY.md"
      provides: "Documented approach for bidirectional synchronization"
      min_lines: 50
  key_links:
    - from: "04-01-SYNC-ANALYSIS.md"
      to: "local directory"
      via: "Directory listing and file comparison"
      pattern: "C:\\\\Users\\\\mose\\\\.claude\\\\get-shit-done"
    - from: "04-01-SYNC-STRATEGY.md"
      to: "cloned repository"
      via: "Git operations and file synchronization"
      pattern: "C:\\\\github-repos\\\\my-claude-code-repos"

---

<objective>
Analyze and prepare for synchronization between the local GSD directory (C:\Users\mose\.claude\get-shit-done) and the cloned upstream repository (C:\github-repos\my-claude-code-repos\get-shit-done-code-index).

Purpose: Establish a clear understanding of what content exists in each location and create a documented strategy for safe bidirectional synchronization
Output: Sync analysis document and synchronization strategy
</objective>

<execution_context>
@C:\Users\mose\.claude\get-shit-done\workflows\execute-plan.md
@C:\Users\mose\.claude\get-shit-done\templates\summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md

# Phase 2 Results Reference
@.planning/phases/02-workflow-integration/02-01-SUMMARY.md
@.planning/phases/02-workflow-integration/02-02-SUMMARY.md
@.planning/phases/02-workflow-integration/02-03-SUMMARY.md

# Repository Paths
- Local: C:\Users\mose\.claude\get-shit-done
- Clone: C:\github-repos\my-claude-code-repos\get-shit-done-code-index
</context>

<tasks>

<task type="auto">
  <name>Task 1: Catalog local GSD directory structure</name>
  <files>C:\Users\mose\.claude\get-shit-done\**</files>
  <action>
    Use mcp__desktop-commander__list_directory with depth=3 to recursively catalog all files in the local GSD directory (C:\Users\mose\.claude\get-shit-done).
    
    Capture:
    - All directories and their structure
    - All files with sizes and timestamps
    - Key subdirectories: .planning, workflows, templates, references, research, implementing-using-code-index-mcp
    
    Output format: Create a structured markdown document showing the complete directory tree.
  </action>
  <verify>
    - mcp__desktop-commander__read_file on the created analysis document to verify completeness
    - Check that all major subdirectories are listed (.planning, workflows, templates, references, research)
  </verify>
  <done>Complete directory tree of local GSD directory captured in 04-01-SYNC-ANALYSIS.md</done>
</task>

<task type="auto">
  <name>Task 2: Catalog cloned repo structure</name>
  <files>C:\github-repos\my-claude-code-repos\get-shit-done-code-index\**</files>
  <action>
    Use mcp__desktop-commander__list_directory with depth=3 to recursively catalog all files in the cloned repository (C:\github-repos\my-claude-code-repos\get-shit-done-code-index).
    
    Capture:
    - All directories and their structure
    - All files with sizes and timestamps
    - Key subdirectories: .planning, agents, workflows, templates, hooks, commands
    
    Output format: Add to the same analysis document, showing the cloned repo structure side-by-side with local structure.
  </action>
  <verify>
    - mcp__desktop-commander__read_file on the updated analysis document
    - Check that cloned repo structure is complete and includes .planning/phases subdirectories
  </verify>
  <done>Complete directory tree of cloned repo captured in 04-01-SYNC-ANALYSIS.md</done>
</task>

<task type="auto">
  <name>Task 3: Identify file differences between local and clone</name>
  <files>.planning/phases/04-repository-synchronization/04-01-SYNC-ANALYSIS.md</files>
  <action>
    Compare the two directory structures and identify:
    
    1. Files that exist in local but NOT in clone (local-only)
    2. Files that exist in clone but NOT in local (clone-only)
    3. Files that exist in both but may have different content (based on size/timestamp)
    
    Focus areas:
    - .planning directory: Compare planning artifacts
    - workflows directory: Compare workflow files for MCP integration changes
    - references directory: Compare reference documents
    - research directory: Check if research files exist in clone
    
    Create a detailed "Differences" section in 04-01-SYNC-ANALYSIS.md.
  </action>
  <verify>
    - mcp__desktop-commander__read_file on the differences section
    - Verify all categories are populated: local-only, clone-only, and potentially different files
  </verify>
  <done>Complete file difference analysis documented in 04-01-SYNC-ANALYSIS.md</done>
</task>

<task type="auto">
  <name>Task 4: Analyze workflow file differences for MCP integration</name>
  <files>C:\Users\mose\.claude\get-shit-done\workflows\**, C:\github-repos\my-claude-code-repos\get-shit-done-code-index\get-shit-done\workflows\**</files>
  <action>
    Specifically compare workflow files between local and clone to identify MCP integration differences:
    
    1. Read key workflow files from both locations
    2. Compare for presence of:
       - mcp__desktop-commander__* tool references
       - mcp__code-index-mcp__* tool references
       - <code_index_mcp> headers
       - <tool_requirements> sections
    
    Key workflow files to compare:
    - execute-plan.md
    - plan-phase.md
    - map-codebase.md
    - verify-phase.md
    - verify-work.md
    
    Document which workflow files need syncing from local to clone due to Phase 2 MCP integration changes.
  </action>
  <verify>
    - mcp__desktop-commander__read_file on workflow comparison section
    - Verify each workflow file is categorized: "needs sync" or "already in sync"
  </verify>
  <done>Workflow file MCP integration comparison documented in 04-01-SYNC-ANALYSIS.md</done>
</task>

<task type="auto">
  <name>Task 5: Create synchronization strategy document</name>
  <files>.planning/phases/04-repository-synchronization/04-01-SYNC-STRATEGY.md</files>
  <action>
    Create 04-01-SYNC-STRATEGY.md documenting the approach for safe bidirectional synchronization:
    
    Strategy sections:
    1. "Sync Direction" - Which direction for each file category
       - Local to clone: MCP-integrated workflows, research files, references
       - Clone to local: Project structure updates, agent definitions
       - Bidirectional: .planning directory files
    
    2. "Sync Methods" - How to perform the sync
       - Method A: Direct file copy for new files
       - Method B: Git-based sync for versioned content
       - Method C: Merge strategy for conflicting files
    
    3. "Backup Plan" - What to do if sync fails
       - Create backup timestamp directory
       - Rollback procedures
    
    4. "Verification Steps" - How to confirm successful sync
       - File count comparison
       - Content sampling verification
       - Git status check
  </action>
  <verify>
    - mcp__desktop-commander__read_file on the strategy document
    - Verify all four sections are complete and actionable
  </verify>
  <done>Complete synchronization strategy documented in 04-01-SYNC-STRATEGY.md</done>
</task>

<task type="auto">
  <name>Task 6: Create sync manifest file</name>
  <files>.planning/phases/04-repository-synchronization/04-01-SYNC-MANIFEST.md</files>
  <action>
    Create a detailed manifest file listing all files to be synchronized in Plan 04-02:
    
    Manifest format:
    ```markdown
    # Sync Manifest
    
    ## Local to Clone (Source: C:\Users\mose\.claude\get-shit-done)
    - [ ] workflows/execute-plan.md
    - [ ] workflows/plan-phase.md
    ...
    
    ## Clone to Local (Source: C:\github-repos\my-claude-code-repos\get-shit-done-code-index)
    - [ ] agents/gsd-planner.md
    ...
    
    ## Merge Required (Both locations modified)
    - [ ] .planning/STATE.md
    ...
    ```
    
    This manifest will be the checklist for Plan 04-02 execution.
  </action>
  <verify>
    - mcp__desktop-commander__read_file on the manifest
    - Verify all files from the difference analysis are represented in the manifest
  </verify>
  <done>Complete sync manifest created in 04-01-SYNC-MANIFEST.md with all files to be synchronized</done>
</task>

<task type="auto">
  <name>Task 7: Create backup of clone repository</name>
  <files>C:\github-repos\my-claude-code-repos\get-shit-done-code-index\**</files>
  <action>
    Before any sync operations, create a safety backup of the cloned repository:
    
    1. Create timestamped backup directory: C:\github-repos\my-claude-code-repos\get-shit-done-code-index-backup-YYYYMMDD-HHMMSS
    2. Copy all content from cloned repo to backup directory
    3. Verify backup was created successfully
    
    Use mcp__desktop-commander__start_process to run robocopy or similar for efficient directory copying.
  </action>
  <verify>
    - mcp__desktop-commander__list_directory on the backup directory to verify contents match source
    - Check backup directory size is comparable to source
  </verify>
  <done>Safety backup of cloned repository created at get-shit-done-code-index-backup-[timestamp]</done>
</task>

<task type="auto">
  <name>Task 8: Document sync prerequisites and checks</name>
  <files>.planning/phases/04-repository-synchronization/04-01-PREREQUISITES.md</files>
  <action>
    Create 04-01-PREREQUISITES.md documenting:
    
    1. "Pre-Sync Checklist" - What must be true before sync
       - [ ] No uncommitted changes in clone repository
       - [ ] Backup successfully created
       - [ ] Disk space available (minimum 2x clone size)
       - [ ] Write permissions verified on both directories
    
    2. "Risk Assessment" - What could go wrong
       - Data loss scenarios
       - Merge conflict scenarios
       - Permission issues
    
    3. "Rollback Plan" - How to revert if sync fails
       - Restore from backup
       - Git reset procedures
       - Manual file restoration steps
    
    This document ensures Plan 04-02 can execute safely.
  </action>
  <verify>
    - mcp__desktop-commander__read_file on prerequisites document
    - Verify all three sections are complete
  </verify>
  <done>Complete prerequisites and rollback plan documented in 04-01-PREREQUISITES.md</done>
</task>

<task type="auto">
  <name>Task 9: Update STATE.md with Phase 04 Plan 01 status</name>
  <files>.planning/STATE.md</files>
  <action>
    Update .planning/STATE.md to reflect completion of Phase 04 Plan 01:
    
    1. Update current position to "Phase 4, Plan 2 (starting)"
    2. Add to Accumulated Context:
       - Decisions: Sync strategy documented, backup created
       - Pending todos: Execute sync from Plan 04-02
    3. Update progress percentage
    
    Use mcp__desktop-commander__read_file to read current STATE.md, then mcp__desktop-commander__edit_block to make targeted updates.
  </action>
  <verify>
    - mcp__desktop-commander__read_file on updated STATE.md
    - Verify current position reflects Phase 4 progress
  </verify>
  <done>STATE.md updated to reflect Phase 04 Plan 01 completion and readiness for Plan 02</done>
</task>

<task type="auto">
  <name>Task 10: Commit sync analysis documents</name>
  <files>.planning/phases/04-repository-synchronization/*.md, .planning/STATE.md</files>
  <action>
    Commit the sync analysis documents to the cloned repository:
    
    1. Use mcp__desktop-commander__start_process to run git commands
    2. Stage the analysis documents:
       - 04-01-SYNC-ANALYSIS.md
       - 04-01-SYNC-STRATEGY.md
       - 04-01-SYNC-MANIFEST.md
       - 04-01-PREREQUISITES.md
    3. Stage STATE.md
    4. Commit with message: "docs(04-01): create sync analysis and strategy documents"
    5. Verify commit was successful
    
    Git commands to use:
    - git add (for staging)
    - git commit (for committing)
    - git log -1 (for verification)
  </action>
  <verify>
    - mcp__desktop-commander__start_process to run "git log -1"
    - Verify commit message shows sync analysis documents
  </verify>
  <done>Sync analysis and strategy documents committed to repository</done>
</task>

</tasks>

<verification>
Overall phase checks:
1. All analysis documents created and populated
2. Sync strategy document is complete and actionable
3. Sync manifest lists all files to be synchronized
4. Backup of cloned repository exists
5. Prerequisites document is complete
6. STATE.md updated to reflect Phase 04 Plan 01 completion
</verification>

<success_criteria>
- [ ] 04-01-SYNC-ANALYSIS.md created with complete directory comparison
- [ ] 04-01-SYNC-STRATEGY.md created with documented sync approach
- [ ] 04-01-SYNC-MANIFEST.md created with file checklist
- [ ] 04-01-PREREQUISITES.md created with risk assessment and rollback plan
- [ ] Backup of cloned repository created
- [ ] STATE.md updated with Phase 04 Plan 01 status
- [ ] All documents committed to repository
</success_criteria>

<output>
After completion, create `.planning/phases/04-repository-synchronization/04-01-SUMMARY.md`

Summary should include:
- Duration and timestamps
- Number of files analyzed in each location
- Key differences identified
- Sync strategy decisions
- Backup location created
- Files that need syncing in Plan 04-02
</output>
