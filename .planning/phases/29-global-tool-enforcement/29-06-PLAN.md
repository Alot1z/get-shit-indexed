---
phase: 29
plan: 06
type: testing
wave: 3
depends_on: [29-05]
files_modified:
  - tests/install.test.ts
  - tests/tool-priority.test.ts
  - tests/hooks.test.ts
autonomous: true
must_haves:
  truths:
    - All installation paths tested
    - Tool priority logic verified
    - Hook redirection works
  artifacts:
    - tests/install.test.ts:100
    - tests/tool-priority.test.ts:80
    - tests/hooks.test.ts:60
---

# 29-06: Testing & Validation

## Objective
Test all Phase 29 components.

## Tasks

### Task 1: Installation Tests
**File**: `tests/install.test.ts`
**Action**: Test installation system

```typescript
import { describe, it, expect } from 'vitest';
import { installGSI } from '../lib/gsi-install/installer';

describe('GSI Installation', () => {
  it('should install to global location', async () => {
    const result = await installGSI({ global: true, force: true, verbose: false });
    expect(result.success).toBe(true);
    expect(result.location).toBe('global');
  });

  it('should install to project location', async () => {
    const result = await installGSI({ global: false, force: true, verbose: false });
    expect(result.success).toBe(true);
    expect(result.location).toBe('project');
  });
});
```

**Done**:
- [ ] Install tests pass
- [ ] Edge cases covered

### Task 2: Tool Priority Tests
**File**: `tests/tool-priority.test.ts`
**Action**: Test tool priority logic

```typescript
describe('Tool Priority', () => {
  it('should return MCP alternative for Read', () => {
    const mapping = getMCPAlternative('Read');
    expect(mapping?.mcpAlternative).toBe('mcp__desktop-commander__read_file');
  });

  it('should return MCP alternative for Grep', () => {
    const mapping = getMCPAlternative('Grep');
    expect(mapping?.mcpAlternative).toBe('mcp__code-index-mcp__search_code_advanced');
  });
});
```

**Done**:
- [ ] All mappings tested
- [ ] Priority logic verified

### Task 3: Hook Tests
**File**: `tests/hooks.test.ts`
**Action**: Test PreToolUse hook

```typescript
describe('PreToolUse Hook', () => {
  it('should redirect Read to mcp__desktop-commander__read_file', async () => {
    const result = await preToolUse({ tool: 'Read', parameters: { file_path: '/test' } });
    expect(result.redirect?.tool).toBe('mcp__desktop-commander__read_file');
  });
});
```

**Done**:
- [ ] Hook redirects work
- [ ] Parameters mapped correctly

## Output

Comprehensive test suite.

**Phase 29 Complete**
