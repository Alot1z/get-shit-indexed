---
phase: 29
plan: 05
type: implementation
wave: 3
depends_on: [29-01, 29-02, 29-03, 29-04]
files_modified:
  - bin/gsi.js
  - lib/cli/commands/install.ts
  - lib/cli/commands/status.ts
autonomous: false
must_haves:
  truths:
    - gsi install --global works
    - gsi install --project works
    - gsi status shows installation state
  artifacts:
    - bin/gsi.js:50
    - lib/cli/commands/install.ts:80
    - lib/cli/commands/status.ts:60
---

# 29-05: CLI Installation Commands

## Objective
Create CLI commands for GSI installation and status checking.

## Tasks

### Task 1: Main CLI Entry
**File**: `bin/gsi.js`
**Action**: Create main CLI entry point

```javascript
#!/usr/bin/env node
const { program } = require('commander');

program
  .name('gsi')
  .description('Get Shit Indexed - MCP Tool Enforcement System')
  .version('1.0.0');

program
  .command('install')
  .description('Install GSI rules')
  .option('-g, --global', 'Install globally to ~/.claude/')
  .option('-p, --project', 'Install to current project ./.claude/')
  .option('-f, --force', 'Overwrite existing files')
  .action(require('../lib/cli/commands/install'));

program
  .command('status')
  .description('Show GSI installation status')
  .action(require('../lib/cli/commands/status'));

program.parse();
```

**Done**:
- [ ] CLI entry works
- [ ] Commands registered

### Task 2: Install Command
**File**: `lib/cli/commands/install.ts`
**Action**: Implement install command

```typescript
export async function install(options: { global?: boolean; project?: boolean; force?: boolean }) {
  const scope = options.global ? 'global' : 'project';
  
  console.log(`Installing GSI to ${scope} location...`);
  
  const result = await installGSI({
    global: options.global ?? false,
    force: options.force ?? false,
    verbose: true
  });
  
  if (result.success) {
    console.log(`✓ Installed ${result.filesCopied.length} files`);
  } else {
    console.error('✗ Installation failed');
    result.errors.forEach(e => console.error(`  ${e}`));
  }
}
```

**Done**:
- [ ] Install works
- [ ] Error handling

### Task 3: Status Command
**File**: `lib/cli/commands/status.ts`
**Action**: Implement status command

```typescript
export async function status() {
  console.log('GSI Installation Status:\n');
  
  // Check global
  const globalConfig = await loadConfig('global');
  console.log(`Global: ${globalConfig.version}`);
  
  // Check project
  const projectConfig = await loadConfig('project');
  console.log(`Project: ${projectConfig.version}`);
  
  // Check MCP servers
  console.log('\nMCP Servers:');
  console.log(`  Desktop Commander: ${globalConfig.mcpServers['desktop-commander'] ? '✓' : '✗'}`);
  console.log(`  Code-Index: ${globalConfig.mcpServers['code-index-mcp'] ? '✓' : '✗'}`);
}
```

**Done**:
- [ ] Status shows all info
- [ ] Clear output

## Output

CLI commands for GSI management.

**Next**: 29-06 - Testing & Validation
