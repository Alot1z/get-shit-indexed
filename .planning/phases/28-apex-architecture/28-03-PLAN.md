---
phase: 28
plan: 03
type: implementation
wave: 2
depends_on: [28-01]
files_modified:
  - lib/cli-tools/package.json
  - lib/cli-tools/bin/heretic-cli
  - lib/cli-tools/tools/analyze
  - lib/cli-tools/tools/rewrite
  - lib/cli-tools/tools/score
autonomous: true
must_haves:
  truths:
    - CLI package installs globally and locally
    - Tools execute without MCP server dependency
    - Commands work: heretic analyze, rewrite, score
  artifacts:
    - lib/cli-tools/package.json:50
    - lib/cli-tools/bin/heretic-cli:30
    - lib/cli-tools/tools/analyze:80
    - lib/cli-tools/tools/rewrite:60
    - lib/cli-tools/tools/score:50
  key_links:
    - from: package.json:bin
      to: bin/heretic-cli:entrypoint
      via: npm install
    - from: heretic-cli:CLI parsing
      to: tools/*:tool execution
      via: command switch
    - from: tools/analyze
      to: lib/heretic-core/analyzer
      via: ES module import
---

# 28-03: CLI Tools Integration

## Objective
Convert heretic-core modules into standalone CLI tools without MCP dependency.

## Tasks

### Task 1: CLI Package Setup
**Files**: `lib/cli-tools/package.json`, `lib/cli-tools/bin/heretic-cli`
**Action**: Create Node.js CLI package

**Verify**:
- npm install -g works
- heretic --version displays
- Help text shows all commands

**Done**:
- [ ] package.json with bin entry
- [ ] Executable heretic-cli script
- [ ] CLI argument parsing

### Task 2: Analyze Tool
**Files**: `lib/cli-tools/tools/analyze`
**Action**: Create risk analysis CLI tool

**Verify**:
- `heretic analyze "prompt"` returns risk score
- JSON output format works
- Exit codes correct

**Done**:
- [ ] analyze tool implemented
- [ ] Risk scoring output
- [ ] JSON/terminal formats

### Task 3: Rewrite Tool
**Files**: `lib/cli-tools/tools/rewrite`
**Action**: Create prompt rewriting CLI tool

**Verify**:
- `heretic rewrite "prompt"` returns 3 variants
- Strategy selection works
- Output formatted correctly

**Done**:
- [ ] rewrite tool implemented
- [ ] Multiple strategies output
- [ ] Template application working

### Task 4: Score Tool
**Files**: `lib/cli-tools/tools/score`
**Action**: Create response scoring CLI tool

**Verify**:
- `heretic score original.txt response.txt` works
- Similarity scores calculated
- Best response identified

**Done**:
- [ ] score tool implemented
- [ ] Embedding comparison
- [ ] Ranking output

## Verification

### Success Criteria
- [ ] CLI installs and executes globally
- [ ] All tools work standalone
- [ ] No MCP server required

## Output

Standalone CLI package with analyze, rewrite, score tools.

**Next**: 28-04 - Claude Code Skill Integration
