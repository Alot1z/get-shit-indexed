# Plan 37-01: Integrate patch-manager Module

## Objective
Integrate the patch-manager.ts module into the GSI npm package so it's distributed with future versions and accessible via CLI.

## Context
- Module location: get-shit-indexed/lib/workflow-modules/patch-manager.ts
- Purpose: Handles backup/restore of local modifications across GSI package updates
- Currently: Module exists but is not exported or accessible via CLI

## Tasks

### Task 1: Create Module Index File
- [ ] Create get-shit-indexed/lib/workflow-modules/index.ts
- [ ] Export PatchManager class
- [ ] Export all interfaces (PatchMetadata, PatchFile, PatchSummary, MergeResult, Conflict)
- [ ] Verify TypeScript compiles without errors

### Task 2: Update package.json Exports
- [ ] Add export entry for ./lib/workflow-modules
- [ ] Add export entry for ./lib/workflow-modules/patch-manager
- [ ] Verify module resolution works

### Task 3: Add CLI Commands to gsi-tools.js
- [ ] Add `gsi patch backup` command
- [ ] Add `gsi patch restore` command
- [ ] Add `gsi patch status` command
- [ ] Add `gsi patch diff` command
- [ ] Verify CLI commands work

### Task 4: Create Integration Tests
- [ ] Test backup creates correct metadata
- [ ] Test restore merges correctly
- [ ] Test conflict detection works
- [ ] Test YAML frontmatter parsing

### Task 5: Add Documentation
- [ ] Create docs/patch-manager.md
- [ ] Document all CLI commands
- [ ] Add usage examples
- [ ] Add troubleshooting section

### Task 6: Verify Package Distribution
- [ ] Run npm pack
- [ ] Extract and verify module included
- [ ] Test import from fresh install
- [ ] Verify CLI accessible globally

## Success Criteria
- [ ] patch-manager.ts exported from GSI package
- [ ] CLI commands working
- [ ] Module accessible after npm install -g
- [ ] Documentation complete

## Estimated Time
30 minutes

## Dependencies
- Phase 36 (Codebase Cleanup) complete
