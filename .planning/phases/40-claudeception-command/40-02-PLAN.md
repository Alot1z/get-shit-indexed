# Plan 40-02: Rework claudeception with GSI Patterns

## Objective
Rework the cloned claudeception command to fully utilize GSI patterns including thinking_phase, MCP tools, and workflow integration.

## Context
- Command: commands/gsi/claudeception.md (created in 40-01)
- Need: Full GSI pattern integration
- Features: Thinking hooks, MCP optimization, state management

## Tasks

### Task 1: Add Thinking Integration Points
- [ ] Add PRE_WORKFLOW thinking (Tractatus for structure analysis)
- [ ] Add PRE_STEP thinking before each major step
- [ ] Add POST_STEP thinking for reflection
- [ ] Add POST_WORKFLOW thinking for synthesis
- [ ] Document thinking triggers

### Task 2: Add MCP Tool Optimization
- [ ] Add <code_index_mcp> header with tool declarations
- [ ] Add batch file reading patterns
- [ ] Add code search patterns
- [ ] Add process execution patterns
- [ ] Add token optimization comments

### Task 3: Add Workflow Phases
- [ ] Phase 1: ANALYZE - Analyze conversation for patterns
- [ ] Phase 2: EXTRACT - Extract knowledge artifacts
- [ ] Phase 3: GENERATE - Generate skills/agents/features
- [ ] Phase 4: INTEGRATE - Integrate into GSI system
- [ ] Phase 5: VERIFY - Verify generated artifacts

### Task 4: Add State Management
- [ ] Create state file: .planning/claudeception-state.json
- [ ] Track extraction history
- [ ] Track generated artifacts
- [ ] Track effectiveness metrics
- [ ] Add resume capability

### Task 5: Add Error Handling
- [ ] Handle extraction failures gracefully
- [ ] Add fallback patterns
- [ ] Create error recovery steps
- [ ] Add user notification
- [ ] Log all errors

### Task 6: Add Checkpoint System
- [ ] Create checkpoint after ANALYZE
- [ ] Create checkpoint after EXTRACT
- [ ] Create checkpoint after GENERATE
- [ ] Add rollback capability
- [ ] Document checkpoint strategy

### Task 7: Update Command File
- [ ] Apply all enhancements to claudeception.md
- [ ] Add comprehensive examples
- [ ] Add troubleshooting section
- [ ] Add usage documentation
- [ ] Verify command completeness

## Success Criteria
- [ ] Thinking integration complete
- [ ] MCP optimization complete
- [ ] All 5 workflow phases implemented
- [ ] State management working

## Estimated Time
35 minutes

## Dependencies
- Plan 40-01 complete
