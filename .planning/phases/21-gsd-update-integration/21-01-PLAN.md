# Phase 21-01: GSD Update Monitoring System

## Objective
Create a system to monitor the original GSD npm package for updates and analyze changes for integration into GSI.

## Problem Analysis

**Current State:**
- GSI is a fork of GSD with enhancements
- No automated way to detect GSD updates
- Manual process to integrate new GSD features

**Solution:**
Create an update monitoring system that checks npm for GSD updates, analyzes changes, and suggests integrations.

## Tasks

### Task 1: Create NPM Version Checker
```
<task>
Create module to check GSD npm package version.

1. Create lib/gsd-integration/version-checker.js
2. Implement getLatestGSDVersion():
   - Query npm registry for get-shit-done
   - Parse version from response
   - Handle network errors gracefully
3. Implement getInstalledGSDVersion():
   - Read from .planning/gsd-integration-tracking.json
4. Implement hasUpdateAvailable()
5. Add caching (check once per day max)
</task>

<files>
lib/gsd-integration/version-checker.js
</files>

<acceptance>
- NPM version check works
- Installed version tracked
- Update detection works
</acceptance>
```

### Task 2: Create Package Downloader
```
<task>
Create module to download GSD package for analysis.

1. Create lib/gsd-integration/downloader.js
2. Implement downloadGSDPackage(version):
   - Download tarball from npm
   - Extract to temp directory
   - Return extraction path
3. Implement cleanupDownload(path)
4. Add error handling for network issues
5. Add progress reporting
</task>

<files>
lib/gsd-integration/downloader.js
</files>

<acceptance>
- Package download works
- Extraction works
- Cleanup implemented
</acceptance>
```

### Task 3: Create Change Analyzer
```
<task>
Create module to analyze differences between GSD versions.

1. Create lib/gsd-integration/change-analyzer.js
2. Implement analyzeChanges(oldVersion, newVersion):
   - Compare file lists
   - Identify new files
   - Identify modified files
   - Identify deleted files
3. Implement categorizeChanges(changes):
   - BUG_FIX: Bug corrections
   - NEW_FEATURE: New capabilities
   - REFACTOR: Code restructuring
   - DOCUMENTATION: Doc changes
   - GSD_SPECIFIC: GSD-only features (skip)
4. Implement assessImpact(changes):
   - Estimate integration effort
   - Identify conflicts with GSI
   - Suggest integration approach
</task>

<files>
lib/gsd-integration/change-analyzer.js
</files>

<acceptance>
- Change detection works
- Categorization accurate
- Impact assessment useful
</acceptance>
```

### Task 4: Create Integration Suggester
```
<task>
Create module to suggest integrations from GSD updates.

1. Create lib/gsd-integration/suggester.js
2. Implement suggestIntegrations(changes):
   - Filter by category (skip GSD_SPECIFIC)
   - Prioritize by impact and effort
   - Generate integration suggestions
3. Implement generateIntegrationPlan(suggestions):
   - Create step-by-step plan
   - Estimate effort
   - Identify dependencies
4. Implement createMergeStrategy(change):
   - Direct copy for new files
   - Diff merge for modified files
   - Conflict resolution suggestions
</task>

<files>
lib/gsd-integration/suggester.js
</files>

<acceptance>
- Integration suggestions generated
- Plans created
- Merge strategies defined
</acceptance>
```

### Task 5: Create Update Tracker
```
<task>
Create module to track GSD update history.

1. Update .planning/gsd-integration-tracking.json
2. Add version history array
3. Add integrated_changes array
4. Add deferred_changes array
5. Implement recordUpdate(version, changes)
6. Implement recordIntegration(version, change, status)
7. Implement getUpdateHistory()
</task>

<files>
.planning/gsd-integration-tracking.json
lib/gsd-integration/tracker.js
</files>

<acceptance>
- Tracking file updated
- History recording works
- Queryable history
</acceptance>
```

### Task 6: Create CLI Command
```
<task>
Add gsi check-gsd-updates command to CLI.

1. Update bin/gsi-tools.js
2. Add 'check-gsd-updates' command:
   - Check for new version
   - Download and analyze if update available
   - Display change summary
   - Offer to generate integration plan
3. Add 'integrate-gsd-change <change-id>' command:
   - Apply suggested integration
   - Update tracking file
4. Add 'gsd-update-history' command
</task>

<files>
bin/gsi-tools.js
</files>

<acceptance>
- check-gsd-updates command works
- integrate-gsd-change works
- History viewable
</acceptance>
```

### Task 7: Create Scheduled Check
```
<task>
Create scheduled check for GSD updates.

1. Create hooks/check-gsd-updates.js
2. Implement daily check (via gsi-statusline or similar)
3. Display notification when update available
4. Store last check timestamp
5. Add configuration for check frequency
</task>

<files>
hooks/check-gsd-updates.js
</files>

<acceptance>
- Scheduled check works
- Notifications displayed
- Configurable frequency
</acceptance>
```

## Verification

**Must Have:**
- [ ] Version checking works
- [ ] Package download works
- [ ] Change analysis accurate
- [ ] Integration suggestions useful
- [ ] CLI commands work

## Estimated Duration
15-20 minutes (7 tasks)

## Dependencies
- Phase 20 (Thinking Integration Completion)
