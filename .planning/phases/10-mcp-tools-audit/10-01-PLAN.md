---
phase: 10-mcp-tools-audit
plan: 01
type: execute
wave: 1
depends_on: [09-repository-renovation]
files_modified: [".planning/codebase/MCP-SERVER-AUDIT.md"]
autonomous: true
user_setup: []

must_haves:
  truths:
    - "All MCP servers used by GSI are documented"
    - "Each server's purpose and functionality is documented"
    - "All MCP server connections verified working"
    - "Any GSI references in MCP configs updated to GSI"
    - "MCP server status documented with current state"
  artifacts:
    - path: ".planning/codebase/MCP-SERVER-AUDIT.md"
      provides: "Complete MCP server documentation for GSI"
      min_lines: 200
      contains: ["desktop-commander", "code-index-mcp", "CodeGraphContext", "CONNECTED"]
  key_links:
    - from: "MCP-SERVER-AUDIT.md"
      to: "GSI workflows"
      via: "MCP tool integration"
      pattern: "mcp__.*__"
---

<objective>
Comprehensive audit of ALL MCP servers used by GSI with documentation, connection verification, and configuration updates.

Purpose: Ensure all MCP servers are documented, working, and properly configured for GSI
Output: Complete MCP server audit documentation with connection status
</objective>

<execution_context>
@~/.claude/get-shit-indexed\workflows\execute-plan.md
@~/.claude/get-shit-indexed\templates\summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/codebase/MCP-SERVER-STATUS.md

# Known MCP Servers (from Phase 1)
- Desktop Commander (DC) - File/Process operations
- Code-Index MCP (CI) - Code search/symbol navigation
- CodeGraphContext (CG) - Relationship analysis @ neo4j://localhost:7687
</context>

<tasks>

<task type="auto">
  <name>Task 1: Inventory all configured MCP servers</name>
  <files>.planning/codebase/MCP-SERVER-AUDIT.md</files>
  <action>
    Create comprehensive MCP server inventory:
    
    1. List all MCP servers from system configuration:
       - Check MCP client config files
       - List all mcp__* tools available
       - Document server names and connection types
    
    2. For each server, document:
       - Server name
       - Connection type (stdio, HTTP, WebSocket)
       - Configuration file location
       - Startup command/config
       - Dependencies
    
    3. Create initial audit document structure
    
    Use ListMcpResourcesTool to enumerate available MCP resources.
  </action>
  <verify>MCP-SERVER-AUDIT.md exists with complete server inventory</verify>
  <done>All MCP servers inventoried</done>
</task>

<task type="auto">
  <name>Task 2: Document Desktop Commander MCP</name>
  <files>.planning/codebase/MCP-SERVER-AUDIT.md</files>
  <action>
    Document Desktop Commander (DC) MCP server:
    
    1. Server Info:
       - Name: desktop-commander
       - Purpose: File operations, process management, search
       - Connection: stdio
    
    2. Tools Available:
       - read_file, write_file, edit_block
       - list_directory, create_directory, move_file
       - start_process, interact_with_process, read_process_output
       - start_search, get_more_search_results
       - list_processes, kill_process, force_terminate
       - get_file_info, get_config, get_prompts
    
    3. Test each tool and document:
       - Connection status
       - Response time
       - Any errors or issues
    
    4. Document token efficiency vs native tools
  </action>
  <verify>DC section complete with all tools documented and tested</verify>
  <done>Desktop Commander MCP documented</done>
</task>

<task type="auto">
  <name>Task 3: Document Code-Index MCP</name>
  <files>.planning/codebase/MCP-SERVER-AUDIT.md</files>
  <action>
    Document Code-Index MCP (CI) server:
    
    1. Server Info:
       - Name: code-index-mcp
       - Purpose: Code search, symbol navigation, file analysis
       - Connection: stdio
    
    2. Tools Available:
       - search_code_advanced
       - find_files
       - get_file_summary
       - get_symbol_body
       - build_deep_index
       - set_project_path
       - refresh_index
       - configure_file_watcher
    
    3. Test each tool:
       - Set project path
       - Build index
       - Search for patterns
       - Get file summaries
    
    4. Document index status and capabilities
  </action>
  <verify>CI section complete with all tools documented and tested</verify>
  <done>Code-Index MCP documented</done>
</task>

<task type="auto">
  <name>Task 4: Document CodeGraphContext MCP</name>
  <files>.planning/codebase/MCP-SERVER-AUDIT.md</files>
  <action>
    Document CodeGraphContext (CG) MCP server:
    
    1. Server Info:
       - Name: CodeGraphContext
       - Purpose: Code relationship analysis, graph queries
       - Connection: neo4j://localhost:7687
       - Dependencies: Neo4j database, Docker
    
    2. Tools Available:
       - query_graph / execute_cypher_query
       - find_path
       - analyze_impact
       - visualize
       - find_components
       - get_statistics
       - suggest_refactor
       - add_code_to_graph
       - watch_directory
    
    3. Test connectivity:
       - Verify Neo4j running
       - Test basic query
       - Check graph status
    
    4. Document Docker setup requirements
  </action>
  <verify>CG section complete with neo4j connection verified and tools tested</verify>
  <done>CodeGraphContext MCP documented</done>
</task>

<task type="auto">
  <name>Task 5: Document additional MCP servers</name>
  <files>.planning/codebase/MCP-SERVER-AUDIT.md</files>
  <action>
    Document any additional MCP servers:
    
    Check for and document:
    - sequential-thinking - Step-by-step reasoning
    - tractatus-thinking - Logical structure analysis
    - debug-thinking - Graph-based debugging
    - context7 - Library documentation
    - deepwiki - GitHub repository knowledge
    - rag-web-browser - Web search
    - context-crawl - Web crawling
    - Any other configured servers
    
    For each:
    - Server name and purpose
    - Available tools
    - Connection status
    - Usage in GSI workflows
  </action>
  <verify>All additional MCP servers documented with status</verify>
  <done>Additional MCP servers documented</done>
</task>

<task type="auto">
  <name>Task 6: Test all MCP server connections</name>
  <files>.planning/codebase/MCP-SERVER-AUDIT.md</files>
  <action>
    Comprehensive connection testing:
    
    1. For each MCP server:
       - Attempt to call a simple tool
       - Record response time
       - Record success/failure
    
    2. Document results:
       - Status: CONNECTED / NOT_AVAILABLE / ERROR
       - Response time in ms
       - Any error messages
    
    3. Create summary table:
       | Server | Status | Response | Notes |
    
    4. Identify any issues and potential fixes
  </action>
  <verify>All servers tested with status documented in summary table</verify>
  <done>All MCP server connections tested</done>
</task>

<task type="auto">
  <name>Task 7: Update any GSI references in MCP configs</name>
  <files>**/mcp*.json, **/.claude.json</files>
  <action>
    Check and update MCP configuration files:
    
    1. Find all MCP config files
    2. Search for GSI/GSI references
    3. Update to GSI/gsi where appropriate
    4. Verify configs still work after changes
    
    Be careful not to break:
    - Server startup commands
    - Tool name prefixes (mcp__*__)
    - File paths that haven't been renamed yet
  </action>
  <verify>MCP config files updated with GSI branding where appropriate</verify>
  <done>MCP configurations updated</done>
</task>

<task type="auto">
  <name>Task 8: Create MCP server quick reference</name>
  <files>.planning/codebase/MCP-QUICK-REFERENCE.md</files>
  <action>
    Create quick reference card for MCP usage:
    
    1. Tool Selection Matrix:
       - When to use which server
       - Common patterns
       - Decision tree
    
    2. Common Operations:
       - File read → DC read_file
       - Code search → CI search_code_advanced
       - Relationship query → CG execute_cypher_query
       - Thinking → sequential-thinking
    
    3. Troubleshooting:
       - Server not responding
       - Connection issues
       - Performance tips
    
    Quick reference for developers.
  </action>
  <verify>MCP-QUICK-REFERENCE.md exists with decision matrix and troubleshooting</verify>
  <done>MCP quick reference created</done>
</task>

</tasks>

<verification>
1. All MCP servers documented in MCP-SERVER-AUDIT.md
2. All servers tested with documented status
3. MCP configs updated for GSI
4. Quick reference created
5. Token efficiency documented
</verification>

<success_criteria>
- [ ] All MCP servers inventoried and documented
- [ ] All servers tested with CONNECTED status
- [ ] MCP configs updated for GSI branding
- [ ] MCP-QUICK-REFERENCE.md created
- [ ] Any issues identified and documented
</success_criteria>

<output>
After completion, create `.planning/phases/10-mcp-tools-audit/10-01-SUMMARY.md` with:
- Server inventory summary
- Connection test results
- Issues found and fixes applied
- Next: Tools audit
</output>
