# PLAN: 41-03 - Technical Debt Documentation & Native CLI Evolution

---
phase: 41
plan: 03
name: Technical Debt Documentation & Native CLI Evolution
status: pending
created: 2026-02-18
priority: MEDIUM
estimated_tasks: 14
---

## Objective

Document all technical debt with prioritization, and lay groundwork for Native CLI evolution to reduce MCP dependency.

## Scope

**Part A**: Technical debt cataloging and prioritization
**Part B**: Native CLI tool design and initial implementation

## Part A: Technical Debt Documentation

### Debt Categories

| Category | Description | Priority |
|----------|-------------|----------|
| Architecture | Module organization issues | HIGH |
| Integration | Missing/weak connections | HIGH |
| Testing | Coverage gaps | MEDIUM |
| Documentation | Outdated/incomplete docs | MEDIUM |
| Performance | Optimization opportunities | LOW |

### Tasks (Part A)

- [ ] **Task 1**: Catalog architecture debt
  - Scan for duplicate functionality
  - Identify unused exports
  - List inconsistent patterns
  - Document in DEBT-ARCHITECTURE.md

- [ ] **Task 2**: Catalog integration debt
  - Find disconnected modules
  - List missing integrations
  - Identify weak connections
  - Document in DEBT-INTEGRATION.md

- [ ] **Task 3**: Catalog testing debt
  - Identify untested modules
  - List flaky tests
  - Find missing edge cases
  - Document in DEBT-TESTING.md

- [ ] **Task 4**: Catalog documentation debt
  - Find outdated docs
  - List missing API docs
  - Identify broken examples
  - Document in DEBT-DOCUMENTATION.md

- [ ] **Task 5**: Prioritize and schedule debt
  - Create DEBT-PRIORITIES.md with ranking
  - Assign to future phases
  - Estimate effort for each item

## Part B: Native CLI Evolution

### Strategy

```
STEP 1: VERIFY MCP (DC + CI working)
STEP 2: PORT (Analyze MCP logic)
STEP 3: CREATE (Build Native CLI)
STEP 4: REPLACE (Swap MCP → CLI)
```

### Tool Conversions

| MCP Tool | Native CLI | Status |
|----------|------------|--------|
| mcp__desktop-commander__read_file | bin/gsi-read | Planned |
| mcp__desktop-commander__write_file | bin/gsi-write | Planned |
| mcp__desktop-commander__list_directory | bin/gsi-ls | Planned |
| mcp__code-index-mcp__search_code_advanced | bin/gsi-search | Planned |
| mcp__code-index-mcp__find_files | bin/gsi-find | Planned |

### Tasks (Part B)

- [ ] **Task 6**: Verify MCP integration baseline
  - Test Desktop Commander connectivity
  - Test Code-Index MCP connectivity
  - Document current token savings
  - Create baseline metrics

- [ ] **Task 7**: Design bin/gsi-read
  - Analyze mcp__desktop-commander__read_file
  - Design CLI interface: `gsi-read <path> [--offset N] [--length N]`
  - Plan error handling
  - Create specification

- [ ] **Task 8**: Design bin/gsi-write
  - Analyze mcp__desktop-commander__write_file
  - Design CLI interface: `gsi-write <path> [--mode rewrite|append]`
  - Plan chunking strategy
  - Create specification

- [ ] **Task 9**: Design bin/gsi-search
  - Analyze mcp__code-index-mcp__search_code_advanced
  - Research semantic-code-search patterns
  - Design CLI interface: `gsi-search <pattern> [--type TYPE]`
  - Create specification

- [ ] **Task 10**: Design bin/gsi-find
  - Analyze mcp__code-index-mcp__find_files
  - Design CLI interface: `gsi-find <pattern> [--path PATH]`
  - Create specification

- [ ] **Task 11**: Research external tools
  - semantic-code-search (https://github.com/sturdy-dev/semantic-code-search)
  - picoclaw (https://github.com/sipeed/picoclaw)
  - mdream (https://github.com/harlan-zw/mdream)
  - agent-lightning (https://github.com/microsoft/agent-lightning)
  - txtai (https://github.com/neuml/txtai)

- [ ] **Task 12**: Create CLI tool templates
  - bin/gsi-read.js template
  - bin/gsi-write.js template
  - bin/gsi-search.js template
  - bin/gsi-find.js template

- [ ] **Task 13**: Design gsi-explorer agent
  - Fork from gsi-codebase-mapper.md
  - Enforce gsi-tools usage
  - Prohibit native Read/Write/Search
  - Create specification

- [ ] **Task 14**: Create migration plan
  - Document MCP → CLI transition strategy
  - Create compatibility layer design
  - Plan phased rollout
  - Document in CLI-MIGRATION-PLAN.md

## Success Criteria

1. [ ] DEBT-PRIORITIES.md created with all debt cataloged
2. [ ] CLI tool specifications designed (gsi-read, gsi-write, gsi-search, gsi-find)
3. [ ] External tools research documented
4. [ ] gsi-explorer agent specification created
5. [ ] CLI-MIGRATION-PLAN.md created

## Dependencies

- Plan 41-01 (audit fixes complete)
- Plan 41-02 (verification complete)

## Output Files

- DEBT-ARCHITECTURE.md
- DEBT-INTEGRATION.md
- DEBT-TESTING.md
- DEBT-DOCUMENTATION.md
- DEBT-PRIORITIES.md
- CLI-SPECIFICATIONS.md
- CLI-MIGRATION-PLAN.md
