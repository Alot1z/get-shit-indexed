---
plan: 14-04
phase: 14
name: Update Hook Files with MCP Patterns
created: 2026-02-15
status: pending
estimate: 5 tasks
---

# Plan 14-04: Update Hook Files with MCP Patterns

## Goal
Document MCP patterns in hook files and evaluate MCP alternatives where applicable.

## Context
- **Hook files:** 5 files (gsi-check-update.js, gsi-statusline.js, mcp-enforcer.js, hooks.json, start-cg-server.ps1)
- **Current state:** Hooks use native Node.js fs module
- **Challenge:** Hooks run before MCP tools are available

## Tasks

### Task 1: Document Hook MCP Limitations
**File:** `hooks/README.md` (NEW)
- [ ] Create documentation explaining hook constraints
- [ ] Document why native fs is required for PreToolUse hooks
- [ ] Explain MCP tools available only after hook passes

### Task 2: Enhance mcp-enforcer.js
**File:** `hooks/mcp-enforcer.js`
- [ ] Add recommendation messages for batch reading
- [ ] Add CG tool suggestions for relationship analysis
- [ ] Include token savings estimates in warnings

### Task 3: Add MCP Patterns to gsi-check-update.js
**File:** `hooks/gsi-check-update.js`
- [ ] Add comments documenting MCP alternatives
- [ ] Document why native fetch/fs is used
- [ ] Add reference to MCP tools for similar operations

### Task 4: Add MCP Patterns to gsi-statusline.js
**File:** `hooks/gsi-statusline.js`
- [ ] Add comments documenting MCP alternatives
- [ ] Document why native file reading is used
- [ ] Add reference to read_multiple_files pattern

### Task 5: Commit Changes
**File:** All modified hook files
- [ ] Stage all changes
- [ ] Commit with message: "docs(14-04): document MCP patterns in hook files"

## Verification

### Success Criteria
- [ ] Hook README exists with limitation documentation
- [ ] mcp-enforcer has MCP recommendations
- [ ] All hooks have MCP pattern comments

### Test Commands
```bash
# Verify hook documentation
test -f hooks/README.md && echo "PASS" || echo "FAIL"

# Verify mcp-enforcer has recommendations
grep -c "read_multiple_files\|CodeGraphContext" hooks/mcp-enforcer.js
# Expected: 2+
```

## Dependencies
- None (hooks are standalone)

## Notes
- Hooks cannot use MCP tools directly (they run before MCP)
- Documentation focuses on recommending MCP to agents
- Native fs in hooks is by design, not a gap
