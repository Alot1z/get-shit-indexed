---
plan: 14-01
phase: 14
name: Add read_multiple_files to All Categories
created: 2026-02-15
status: pending
estimate: 8 tasks
---

# Plan 14-01: Add read_multiple_files to All Categories

## Goal
Add `read_multiple_files` pattern to all GSI file categories for 67-87% token savings on batch file reading.

## Context
- **File categories:** Agents (11), Commands (29), Workflows (30), Templates (20)
- **Current usage:** Only 27 references to read_multiple_files
- **Potential savings:** 67-87% tokens when reading 2+ files

## Tasks

### Task 1: Update Agent Files
**File:** `agents/gsi-*.md` (11 files)
- [ ] Add `mcp__desktop-commander__read_multiple_files` to allowed-tools
- [ ] Add usage pattern comment in agent instructions
- [ ] Example: "When reading 2+ files, use read_multiple_files instead of sequential reads"

### Task 2: Update Command Files  
**File:** `commands/gsi/*.md` (29 files)
- [ ] Add `mcp__desktop-commander__read_multiple_files` to allowed-tools
- [ ] Add batch reading pattern in tool_requirements section
- [ ] Document token savings in comments

### Task 3: Update Workflow Files
**File:** `~/.claude/get-shit-indexed/workflows/*.md` (30 files)
- [ ] Search for sequential read_file patterns
- [ ] Replace with read_multiple_files calls
- [ ] Add batch reading examples in code blocks

### Task 4: Update Template Files
**File:** `templates/*.md` (20 files)
- [ ] Add read_multiple_files to relevant templates
- [ ] Include usage examples in discovery/templates
- [ ] Update planner-subagent-prompt.md with batch pattern

### Task 5: Create Batch Reading Guide
**File:** `references/batch-reading-pattern.md` (NEW)
- [ ] Document read_multiple_files usage patterns
- [ ] Include token savings benchmarks
- [ ] Provide code examples for each category

### Task 6: Update Reference Documentation
**File:** `references/*.md` (relevant files)
- [ ] Add batch reading references to existing docs
- [ ] Update agent-tracking.md with batch pattern
- [ ] Update verification-patterns.md

### Task 7: Add Pattern to mcp-enforcer.js
**File:** `hooks/mcp-enforcer.js`
- [ ] Add recommendation for batch reading
- [ ] Log warning when 2+ sequential reads detected
- [ ] Suggest read_multiple_files alternative

### Task 8: Commit Changes
**File:** All modified files
- [ ] Stage all changes
- [ ] Commit with message: "feat(14-01): add read_multiple_files pattern to all categories"

## Verification

### Success Criteria
- [ ] All 4 categories have read_multiple_files in allowed-tools
- [ ] Workflow files use batch reading pattern
- [ ] New reference guide exists with examples
- [ ] mcp-enforcer suggests batch reading

### Test Commands
```bash
# Verify allowed-tools includes read_multiple_files
grep -r "read_multiple_files" agents/ commands/gsi/ --include="*.md" | wc -l
# Expected: 40+ (11 agents + 29 commands)

# Verify workflow patterns
grep -r "read_multiple_files" ~/.claude/get-shit-indexed/workflows/ --include="*.md" | wc -l
# Expected: 30+ (one per workflow)
```

## Dependencies
- None

## Notes
- This is the highest-impact optimization (67-87% token savings)
- Pattern applies to all categories uniformly
- Simple mechanical change, low risk
