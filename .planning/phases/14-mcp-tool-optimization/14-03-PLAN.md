---
plan: 14-03
phase: 14
name: Add Code-Index MCP Symbol Navigation
created: 2026-02-15
status: pending
estimate: 6 tasks
---

# Plan 14-03: Add Code-Index MCP Symbol Navigation

## Goal
Enhance Code-Index MCP (CI) usage for symbol navigation instead of manual file reading.

## Context
- **CI tools:** search_code_advanced, get_symbol_body, get_file_summary, find_files
- **Current CI usage:** 41 references (under-utilized)
- **Token savings:** 90% for symbol extraction vs reading whole files

## Tasks

### Task 1: Add CI Tools to Agents
**File:** `agents/gsi-*.md` (11 files)
- [ ] Add `mcp__code-index-mcp__get_symbol_body`
- [ ] Add `mcp__code-index-mcp__search_code_advanced`
- [ ] Add usage comment: "Use CI for symbol extraction, not full file reads"

### Task 2: Add CI Tools to Commands
**File:** `commands/gsi/*.md` (29 files)
- [ ] Expand CI tools in allowed-tools
- [ ] Add code_index_mcp sections with priority rationale
- [ ] Document when to use CI vs DC vs CG

### Task 3: Update Workflow Symbol Extraction
**File:** `~/.claude/get-shit-indexed/workflows/*.md`
- [ ] Replace Read â†’ search pattern with CI search_code_advanced
- [ ] Replace "Read file, find function" with get_symbol_body
- [ ] Add CI usage examples in process sections

### Task 4: Create CI Usage Reference
**File:** `references/code-index-usage.md` (NEW)
- [ ] Document all CI tools with examples
- [ ] Include token savings benchmarks
- [ ] Add decision tree for CI vs DC vs CG

### Task 5: Update Tool Priority Documentation
**File:** `references/tool-priority-rules.md` (if exists)
- [ ] Add CI symbol navigation priority
- [ ] Include get_symbol_body for function extraction
- [ ] Add search_code_advanced for pattern matching

### Task 6: Commit Changes
**File:** All modified files
- [ ] Stage all changes
- [ ] Commit with message: "feat(14-03): add Code-Index MCP symbol navigation patterns"

## Verification

### Success Criteria
- [ ] All agents have CI symbol tools in allowed-tools
- [ ] All commands have CI tools documented
- [ ] CI usage reference exists
- [ ] Workflows use CI for symbol extraction

### Test Commands
```bash
# Verify CI in agents
grep -l "get_symbol_body\|search_code_advanced" agents/gsi-*.md | wc -l
# Expected: 11

# Verify CI usage reference
test -f references/code-index-usage.md && echo "PASS" || echo "FAIL"
```

## Dependencies
- Plan 14-01 (read_multiple_files)
- Plan 14-02 (CodeGraphContext)

## Notes
- CI requires project path to be set (set_project_path)
- build_deep_index should be called for fresh projects
- CI is fastest for symbol extraction tasks
