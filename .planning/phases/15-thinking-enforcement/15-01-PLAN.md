---
phase: 15
plan: 01
name: Create PreToolUse Thinking Hook
description: Hook that enforces thinking before complex operations
tasks: 7
estimated_time: 12 min
---

# Plan 15-01: Create PreToolUse Thinking Hook

## Goal

PreToolUse hook that suggests/requires thinking server usage for complex operations.

## Tasks

### Task 1: Design thinking threshold logic
- [ ] Define "complex operation" (3+ tools, architectural decision)
- [ ] Define thinking thresholds per operation type
- [ ] Create threshold configuration

### Task 2: Create thinking-enforcer.js hook
- [ ] Read tool call from stdin
- [ ] Check operation complexity
- [ ] Determine if thinking required

### Task 3: Add thinking server selection
- [ ] Map operation types to thinking servers
- [ ] Sequential for step-by-step
- [ ] Tractatus for structural
- [ ] Debug for problem-solving

### Task 4: Implement suggestion message
- [ ] Format helpful suggestion
- [ ] Include which thinking server to use
- [ ] Add example thinking prompt

### Task 5: Add to build-hooks.js
- [ ] Include thinking-enforcer.js in build
- [ ] Add to HOOKS_TO_COPY array
- [ ] Verify dist output

### Task 6: Configure in install.js
- [ ] Add PreToolUse thinking hook config
- [ ] Set as optional (warn, not block)
- [ ] Add enable/disable toggle

### Task 7: Test hook behavior
- [ ] Test with simple operation (pass)
- [ ] Test with complex operation (suggest)
- [ ] Test with thinking already invoked (pass)

## Verification

- [ ] Hook created and working
- [ ] Thresholds configured
- [ ] Suggestions helpful

## Success Criteria

- thinking-enforcer.js created
- Integrated into install flow
- Tested with various operations
