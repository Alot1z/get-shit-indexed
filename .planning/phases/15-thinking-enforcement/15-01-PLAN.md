---
plan: 15-01
phase: 15
name: Add PreToolUse Thinking Hook
created: 2026-02-15
status: pending
estimate: 6 tasks
---

# Plan 15-01: Add PreToolUse Thinking Hook

## Goal
Create a PreToolUse hook that triggers thinking servers before complex tool operations.

## Context
- **Thinking servers:** Sequential, Tractatus, Debug
- **7-BMAD mapping:** Model (Tractatus), Method (Sequential), Debug (Debug-thinking)
- **Trigger points:** Before complex operations, architectural decisions, multi-step tasks

## Tasks

### Task 1: Create Thinking Hook Structure
**File:** `hooks/thinking-trigger.js` (NEW)
- [ ] Create PreToolUse hook file
- [ ] Define trigger conditions for thinking servers
- [ ] Map tool types to appropriate thinking server
- [ ] Add configuration for enable/disable

### Task 2: Implement Sequential Thinking Trigger
**Section:** Sequential (Method circle)
- [ ] Trigger before: start_process, execute commands
- [ ] Use for: multi-step operations, sequential tasks
- [ ] Parameters: 3-7 thoughts typical

### Task 3: Implement Tractatus Thinking Trigger
**Section:** Tractatus (Model circle)
- [ ] Trigger before: architectural decisions, code structure changes
- [ ] Use for: understanding WHAT before HOW
- [ ] Parameters: depth_limit=5, analytical style

### Task 4: Implement Debug Thinking Trigger
**Section:** Debug-thinking (Debug circle)
- [ ] Trigger before: error investigation, bug fixing
- [ ] Use for: systematic debugging with knowledge graph
- [ ] Parameters: problem node creation, hypothesis tracking

### Task 5: Add Hook Configuration
**File:** `hooks/hooks.json`
- [ ] Add thinking-trigger.js to PreToolUse hooks
- [ ] Configure trigger conditions
- [ ] Add enable/disable flag

### Task 6: Commit Changes
**File:** New hook file and configuration
- [ ] Stage all changes
- [ ] Commit with message: "feat(15-01): add PreToolUse thinking hook"

## Verification

### Success Criteria
- [ ] Thinking hook file exists
- [ ] Hook configured in hooks.json
- [ ] Three thinking servers mapped
- [ ] Trigger conditions documented

### Test Commands
```bash
# Verify hook exists
test -f hooks/thinking-trigger.js && echo "PASS" || echo "FAIL"

# Verify configuration
grep -c "thinking-trigger" hooks/hooks.json
# Expected: 1+
```

## Dependencies
- None

## Notes
- Hook should be non-blocking (recommendation only)
- Thinking servers must be available in MCP
- Configuration allows users to disable if needed
