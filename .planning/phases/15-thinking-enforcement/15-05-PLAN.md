---
plan: 15-05
phase: 15
name: Add PostToolUse Reflection Hook
created: 2026-02-15
status: pending
estimate: 6 tasks
---

# Plan 15-05: Add PostToolUse Reflection Hook

## Goal
Create a PostToolUse hook that triggers reflection after significant tool operations.

## Context
- **Reflection need:** Capture learnings after tool execution
- **7-BMAD circle:** Methodd (Documentation/Learning)
- **Integration:** Debug-thinking graph for persistent learning

## Tasks

### Task 1: Create Reflection Hook Structure
**File:** `hooks/reflection-capture.js` (NEW)
- [ ] Create PostToolUse hook file
- [ ] Define trigger conditions for reflection
- [ ] Map tool outcomes to reflection types
- [ ] Add configuration for enable/disable

### Task 2: Implement Learning Capture
**Section:** Debug-thinking Integration
- [ ] Create learning nodes in debug-thinking graph
- [ ] Link learnings to related problems
- [ ] Store in ~/.debug-thinking-mcp/ for persistence
- [ ] Include tool name, outcome, insights

### Task 3: Add Sequential Reflection
**Section:** After Sequential Thinking
- [ ] Capture thought sequence summary
- [ ] Store conclusion and key insights
- [ ] Link to task context
- [ ] Enable retrieval for similar tasks

### Task 4: Add Tractatus Reflection
**Section:** After Tractatus Thinking
- [ ] Export final structure to markdown
- [ ] Store structural insights
- [ ] Enable pattern reuse
- [ ] Link to architectural decisions

### Task 5: Add Hook Configuration
**File:** `hooks/hooks.json`
- [ ] Add reflection-capture.js to PostToolUse hooks
- [ ] Configure trigger conditions
- [ ] Add enable/disable flag
- [ ] Define storage location

### Task 6: Commit Changes
**File:** New hook file and configuration
- [ ] Stage all changes
- [ ] Commit with message: "feat(15-05): add PostToolUse reflection hook"

## Verification

### Success Criteria
- [ ] Reflection hook file exists
- [ ] Hook configured in hooks.json
- [ ] Learning capture implemented
- [ ] Debug-thinking graph integration

### Test Commands
```bash
# Verify hook exists
test -f hooks/reflection-capture.js && echo "PASS" || echo "FAIL"

# Verify configuration
grep -c "reflection-capture" hooks/hooks.json
# Expected: 1+
```

## Dependencies
- Plan 15-01 through 15-04

## Notes
- Reflection enables continuous improvement
- Debug-thinking graph provides persistent storage
- Can be disabled for performance-sensitive operations
- Links to Methodd circle (documentation/learning)
