---
phase: 36
plan: 01
title: CodeGraphContext Removal
wave: 1
priority: HIGH
depends_on: []
files_modified:
  - 106+ files across codebase
autonomous: true
must_haves:
  truths:
    - No CodeGraphContext references remain in any file
    - All CG tool references replaced with CI equivalents
    - Documentation updated to reflect CI-only architecture
  artifacts:
    - 0 grep matches for "CodeGraphContext"
    - 0 grep matches for "mcp__CodeGraphContext"
    - 0 grep matches for "neo4j://localhost"
  key_links:
    - from: All documentation
      to: Code-Index MCP
      via: Updated tool references
---

# 36-01: CodeGraphContext Removal

## Objective
Remove all CodeGraphContext (CG) references from 106 files and replace with Code-Index MCP (CI) equivalents.

## Tasks

### Task 1: Audit CG References
**Files**: All `.md`, `.ts`, `.js` files
**Action**: 
```bash
grep -r "CodeGraphContext\|mcp__CodeGraphContext\|neo4j://localhost" --include="*.md" --include="*.ts" --include="*.js" -l > cg-files.txt
```
**Verify**: List of 106 files captured
**Done**: File list saved to `.planning/cg-files.txt`

### Task 2: Update Documentation Files
**Files**: `.planning/codebase/*.md` (20+ files)
**Action**: Replace CG references with CI equivalents:
- `CodeGraphContext` → `Code-Index MCP`
- `mcp__CodeGraphContext__query` → `mcp__code-index-mcp__search_code_advanced`
- `neo4j://localhost:7687` → (remove)
- CG tool patterns → CI tool patterns

**Verify**: `grep -c "CodeGraphContext" .planning/codebase/*.md` returns 0
**Done**: All codebase docs updated

### Task 3: Update Phase Documentation
**Files**: `.planning/phases/**/*.md` (40+ files)
**Action**: Same replacements as Task 2 across all phase files
**Verify**: `grep -c "CodeGraphContext" .planning/phases/**/*.md` returns 0
**Done**: All phase docs updated

### Task 4: Update ROADMAP.md
**Files**: `.planning/ROADMAP.md`
**Action**: 
- Remove Phase 1 CG server references
- Update success criteria to remove CG mentions
- Update tool chain patterns to CI-only
**Verify**: No CG references in ROADMAP.md
**Done**: Roadmap updated

### Task 5: Update STATE.md
**Files**: `.planning/STATE.md`
**Action**:
- Remove CG from decisions
- Update "Decisions from Phase X" sections
- Remove neo4j connection references
**Verify**: No CG references in STATE.md
**Done**: State file updated

### Task 6: Update Lib Modules
**Files**: `lib/**/*.js`
**Action**:
- Check complexity/cognitive-flow modules for CG imports
- Replace CG function calls with CI equivalents
- Update comments referencing CG
**Verify**: `grep -r "CodeGraphContext" lib/` returns empty
**Done**: Lib modules cleaned

### Task 7: Final Verification
**Action**: Run full codebase grep for any remaining CG references
```bash
grep -r "CodeGraphContext\|mcp__CodeGraphContext\|neo4j://localhost" --include="*.md" --include="*.ts" --include="*.js"
```
**Verify**: Returns 0 matches
**Done**: Verification complete

## Output
- Clean codebase with no CG references
- All documentation points to CI tools
- Updated ROADMAP and STATE files

**Next**: 36-02 - Broken @-References Fix
